<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" href="https://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.css">
		<script src="https://apps.bdimg.com/libs/jquery/1.10.2/jquery.min.js"></script>
		<script src="https://apps.bdimg.com/libs/jquerymobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
		<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
		<script src="js/jquery.cookie.js"></script>
		<style>
			<style>tr {
				border-bottom: 1px solid #d6d6d6;
			}
		</style>
		</style>

		<script>
			var fid;
			var secretid_ck = $.cookie('secretid'); // 读取 cookie
			$(function() {
				var d = new Date();

				$("#flighttime").html(formatDate2(d) + " " + getWeekDate());

				if(secretid_ck == 0) {
					window.location.href = "index.html";
				}
				$.ajax({
					url: "http://47.92.31.116:8888/flightorder/myorder",
					type: 'post', //提交的方式
					async: false,
					data: {
						secretid: secretid_ck
					},
					error: function(request) { //失败的话

					},
					success: function(result) {
						var length=result.length;
						
						var tbody = $("#myorder_tbody");
						for(i = 0; i < length; i++) {
							var flightorderid=result[i].flightorderid;
							var departure=result[i].departure;
							var arrival=result[i].arrival;
							var airfare=result[i].airfare;
							var airline=result[i].airline;
							tbody.append("<tr><td>"+airline+"</td><td>"+departure+"</td><td>"+arrival+"</td><td>$"+airfare+"</td></tr>");

						}

					}

				});

			});

			function selectOrder(input, flightid) {
				fid = flightid;
				var sliblings = sibling(input);
				for(i = 0; i < sliblings.length; i++) {
					sliblings[i].style.color = 'black';
				}
				input.style.color = 'red';

			}

			function sibling(elm) {
				var a = [];
				var p = elm.parentNode.children;
				for(var i = 0, pl = p.length; i < pl; i++) {
					if(p[i] !== elm) a.push(p[i]);
				}
				return a;
			}

			function formatDate(value) {

				var date = new Date(value);
				var year = date.getFullYear().toString();
				var month = (date.getMonth() + 1);
				var day = date.getDate().toString();
				var hour = date.getHours().toString();
				var minutes = date.getMinutes().toString();
				var seconds = date.getSeconds().toString();
				if(month < 10) {
					month = "0" + month;
				}
				if(day < 10) {
					day = "0" + day;
				}
				if(hour < 10) {
					hour = "0" + hour;
				}
				if(minutes < 10) {
					minutes = "0" + minutes;
				}
				if(seconds < 10) {
					seconds = "0" + seconds;
				}

				return hour + ":" + minutes;

			}

			function formatDate2(value) {

				var date = new Date(value);
				var year = date.getFullYear().toString();
				var month = (date.getMonth() + 1);
				var day = date.getDate().toString();
				var hour = date.getHours().toString();
				var minutes = date.getMinutes().toString();
				var seconds = date.getSeconds().toString();
				if(month < 10) {
					month = "0" + month;
				}
				if(day < 10) {
					day = "0" + day;
				}
				if(hour < 10) {
					hour = "0" + hour;
				}
				if(minutes < 10) {
					minutes = "0" + minutes;
				}
				if(seconds < 10) {
					seconds = "0" + seconds;
				}

				return month + "/" + day;

			}

			function getWeekDate() {
				var now = new Date();
				var day = now.getDay();
				var weeks = new Array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saterday");
				var week = weeks[day];
				return week;
			}
		</script>
	</head>

	<body style="background-color: #fffefe;">

		<a id="show" href="#myPopup1" data-rel="popup" class="ui-btn ui-btn-inline ui-corner-all" data-position-to="window" style="display:none"></a>

		<div data-role="popup" id="myPopup1" class="ui-content" data-overlay-theme="b" data-transition="flip">
			<p id="msg"></p>
		</div>

		<div style="margin-bottom:20px;">
			<div style="background:#709bd0;height:100px">
				<div>
					<div style="text-align: center;font-size: 18px; ">My flight order information</div>
				</div>
				<div id="flighttime" style="font-size: 22px;margin-top: 25px; ">

				</div>
			</div>
		</div>

		<div class="container-fluid" style="margin: 0 0px;width:100%">
			<table data-mode="columntoggle" class="ui-responsive ui-shadow" style="width:100%">
				<thead>
					<tr>
						<th>Airline</th>
						<th>Departure</th>
						<th>Arrival</th>
						<th>AirFare</th>
					</tr>
				</thead>
				<tbody id="myorder_tbody">
				</tbody>
			</table>

		</div>
		<div style="position:fixed;background-color:aquamarine; height:60px;width:100%;bottom:0px;">
			<div id="" style="width: 100%;font-size: 22px;text-align: center;margin-top: 10px;">
				<div id="home" style="width: 33%; float:left;" onclick="window.location.href = 'index.html'">Home</div>
				<div id="delete" style="width: 34%; float:left;"></div>
				<div id="flight" style="width: 33%; float:left;" onclick="window.location.href = 'home.html'">Flight</div>
			</div>

		</div>
	</body>

</html>